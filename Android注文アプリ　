package com.example.menuapp;

import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

import androidx.activity.EdgeToEdge;
import androidx.appcompat.app.AppCompatActivity;
import androidx.core.graphics.Insets;
import androidx.core.view.ViewCompat;
import androidx.core.view.WindowInsetsCompat;

import java.lang.reflect.Array;
import java.util.ArrayList;
import java.util.Collections;

public class MainActivity extends AppCompatActivity {
    public static int totalcount = 0; // 全体の合計金額を保持する変数

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); // アクティビティの初期化
        setContentView(R.layout.activity_main); // レイアウトを設定
        TextView totalPrice = findViewById(R.id.totalPrice); // 合計金額を表示するTextViewを取得

        Button curreyBtnP = findViewById(R.id.btnCurryP); // カレーのプラスボタンを取得
        curreyBtnP.setOnClickListener(new View.OnClickListener() { // プラスボタンがクリックされたときの動作を設定
            @Override
            public void onClick(View view) {
                TextView curryNum = findViewById(R.id.curryNum); // カレーの数量を表示するTextViewを取得
                curryNum.setText(String.valueOf(Integer.parseInt(curryNum.getText().toString()) + 1)); // カレーの数量を1増やして表示を更新
                totalPrice.setText(String.valueOf(totalcount += 400)); // 合計金額を400増やして表示を更新
            }
        });

        Button curreyBtnM = findViewById(R.id.btnCurryM); // カレーのマイナスボタンを取得
        curreyBtnM.setOnClickListener(new View.OnClickListener() { // マイナスボタンがクリックされたときの動作を設定
            @Override
            public void onClick(View view) {
                TextView curryNum = findViewById(R.id.curryNum); // カレーの数量を表示するTextViewを取得
                if (Integer.parseInt(curryNum.getText().toString()) > 0) { // カレーの数量が0より大きい場合
                    totalPrice.setText(String.valueOf(totalcount -= 400)); // 合計金額を400減らして表示を更新
                    curryNum.setText(String.valueOf(Integer.parseInt(curryNum.getText().toString()) - 1)); // カレーの数量を1減らして表示を更新
                }
            }
        });

        Button teishokuBtnP = findViewById(R.id.btnTeishokuP); // 定食のプラスボタンを取得
        teishokuBtnP.setOnClickListener(new View.OnClickListener() { // プラスボタンがクリックされたときの動作を設定
            @Override
            public void onClick(View view) {
                TextView teishokuNum = findViewById(R.id.teishokuNum); // 定食の数量を表示するTextViewを取得
                teishokuNum.setText(String.valueOf(Integer.parseInt(teishokuNum.getText().toString()) + 1)); // 定食の数量を1増やして表示を更新
                totalPrice.setText(String.valueOf(totalcount += 550)); // 合計金額を550増やして表示を更新
            }
        });

        Button teishokuBtnM = findViewById(R.id.btnTeishokuM); // 定食のマイナスボタンを取得
        teishokuBtnM.setOnClickListener(new View.OnClickListener() { // マイナスボタンがクリックされたときの動作を設定
            @Override
            public void onClick(View view) {
                TextView teishokuNum = findViewById(R.id.teishokuNum); // 定食の数量を表示するTextViewを取得
                if (Integer.parseInt(teishokuNum.getText().toString()) > 0) { // 定食の数量が0より大きい場合
                    totalPrice.setText(String.valueOf(totalcount -= 550)); // 合計金額を550減らして表示を更新
                    teishokuNum.setText(String.valueOf(Integer.parseInt(teishokuNum.getText().toString()) - 1)); // 定食の数量を1減らして表示を更新
                }
            }
        });

        Button udonBtnP = findViewById(R.id.btnUdonP); // うどんのプラスボタンを取得
        udonBtnP.setOnClickListener(new View.OnClickListener() { // プラスボタンがクリックされたときの動作を設定
            @Override
            public void onClick(View view) {
                TextView udonNum = findViewById(R.id.udonNum); // うどんの数量を表示するTextViewを取得
                udonNum.setText(String.valueOf(Integer.parseInt(udonNum.getText().toString()) + 1)); // うどんの数量を1増やして表示を更新
                totalPrice.setText(String.valueOf(totalcount += 300)); // 合計金額を300増やして表示を更新
            }
        });

        Button udonBtnM = findViewById(R.id.btnUdonM); // うどんのマイナスボタンを取得
        udonBtnM.setOnClickListener(new View.OnClickListener() { // マイナスボタンがクリックされたときの動作を設定
            @Override
            public void onClick(View view) {
                TextView udonNum = findViewById(R.id.udonNum); // うどんの数量を表示するTextViewを取得
                if (Integer.parseInt(udonNum.getText().toString()) > 0) { // うどんの数量が0より大きい場合
                    totalPrice.setText(String.valueOf(totalcount -= 300)); // 合計金額を300減らして表示を更新
                    udonNum.setText(String.valueOf(Integer.parseInt(udonNum.getText().toString()) - 1)); // うどんの数量を1減らして表示を更新
                }
            }
        });

        Button sumBtn = findViewById(R.id.btnSum); // 合計ボタンを取得
        sumBtn.setOnClickListener(new View.OnClickListener() { // 合計ボタンがクリックされたときの動作を設定
            @Override
            public void onClick(View view) {
                TextView money = findViewById(R.id.money); // 手持ちの金額を表示するTextViewを取得
                String test = money.getText().toString(); // 手持ち金額の文字列を取得
                int moneycount = (test.equals("")) ? 0 : Integer.parseInt(money.getText().toString()); // 手持ち金額を整数に変換、空の場合は0

                TextView retrunMoney = findViewById(R.id.retrunMoney); // お釣りの金額を表示するTextViewを取得
                int retruncount = moneycount - totalcount; // お釣りの金額を計算
                retrunMoney.setText(String.valueOf(retruncount)); // お釣りの金額を表示
            }
        });

        Button cleaBtn = findViewById(R.id.btnClea); // クリアボタンを取得
        cleaBtn.setOnClickListener(new View.OnClickListener() { // クリアボタンがクリックされたときの動作を設定
            @Override
            public void onClick(View view) {
                ArrayList<Integer> allCount = new ArrayList<>(); // すべての数量を保持するリストを作成
                Collections.addAll(allCount, R.id.curryNum, R.id.teishokuNum, R.id.udonNum, R.id.totalPrice, R.id.money, R.id.retrunMoney); // リストに数量のTextViewのIDを追加
                for (int i = 0; i < allCount.size(); i++) { // リスト内のすべてのTextViewをクリア
                    TextView count = findViewById(allCount.get(i)); // 各TextViewを取得
                    count.setText(String.valueOf(0)); // 各TextViewを0に設定
                }
                totalcount = 0; // 合計金額を0にリセット
            }
        });
    }
}

